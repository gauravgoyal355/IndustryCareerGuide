<!DOCTYPE html>
<html>
<head>
    <title>Direct Results Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .career { border: 1px solid #ccc; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .score { font-weight: bold; color: #2563eb; }
        .radar { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Direct API Results Test</h1>
    <div id="loading">Loading results...</div>
    <div id="results" style="display: none;">
        <h2>Career Matches</h2>
        <div id="careers"></div>
        
        <h2>Radar Scores</h2>
        <div id="radar" class="radar"></div>
    </div>

    <script>
        async function testAPI() {
            const quizAnswers = {
                "skills_technical_1": "c",
                "skills_communication_1": "d",
                "skills_leadership_1": "c",
                "skills_analytical_1": "c",
                "skills_management_1": ["a", "b", "c"],
                "values_impact_1": ["4", "2", "1", "3"],
                "values_autonomy_1": "e",
                "values_stability_1": "a",
                "values_collaboration_1": "d",
                "values_creativity_1": "b",
                "temperament_social_1": "c",
                "temperament_detail_1": "c",
                "temperament_structure_1": "e",
                "temperament_pressure_1": "a",
                "temperament_decision_1": "c",
                "skills_specialized_1": "a",
                "career_goals_1": "d",
                "work_motivation_1": ["1", "4", "3", "2", "5"],
                "risk_tolerance_1": "c",
                "problem_complexity_1": "b",
                "phd_domain_1": "c",
                "technical_depth_1": "b",
                "programming_experience": "b",
                "programming_languages": ["a", "b", "c"],
                "mathematics_background": "b",
                "mathematical_areas": ["a", "b", "c"],
                "data_analysis_experience": "c",
                "data_tools_experience": ["a", "c", "d"],
                "research_methodology": ["a", "f"],
                "technical_writing_experience": "d",
                "business_finance_background": "a",
                "lab_experience": "c",
                "creative_design_experience": "a",
                "clinical_experience": "e"
            };

            try {
                const response = await fetch('http://localhost:3000/api/matchCareer', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ answers: quizAnswers })
                });

                const data = await response.json();
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').style.display = 'block';
                
                // Show top 5 career matches
                const careersDiv = document.getElementById('careers');
                data.matches.slice(0, 5).forEach((match, index) => {
                    const careerDiv = document.createElement('div');
                    careerDiv.className = 'career';
                    careerDiv.innerHTML = `
                        <h3>#${index + 1}: ${match.details.name}</h3>
                        <p class="score">${match.score}% Match (${match.matchLevel.level})</p>
                        <p>${match.details.description}</p>
                    `;
                    careersDiv.appendChild(careerDiv);
                });
                
                // Show radar scores
                const radarDiv = document.getElementById('radar');
                const radar = data.radarData;
                let radarHTML = '<h3>Radar Dimensions:</h3>';
                radar.categories.forEach((category, index) => {
                    const score = Math.round(radar.scores[index] * 100);
                    radarHTML += `<p><strong>${category}:</strong> ${score}%</p>`;
                });
                radarDiv.innerHTML = radarHTML;
                
            } catch (error) {
                document.getElementById('loading').innerHTML = 'Error: ' + error.message;
            }
        }

        testAPI();
    </script>
</body>
</html>